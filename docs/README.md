# Project Analyzing Motorcycle Part Sales

## Table of Contents

1. [Overview](#overview)
2. [Project Objectives](#project-objectives)
3. [Deliverables](#deliverables)
4. [Environment Setup](#environment-setup)
5. [ETL Pipeline](#etl-pipeline)
6. [SQL Queries](#sql-queries)
7. [Results Visualization in Power BI](#results-visualization-in-power-bi)
8. [Tools Used](#tools-used)
9. [Requirements](#requirements)
10. [Conclusions and Next Steps](#conclusions-and-next-steps)

---

## Overview

This project focuses on analyzing the revenue generated by different product lines across various warehouses, specifically during the months of June, July, and August. The analysis addresses seasonality, purchasing patterns, payment method impact, and warehouse performance.

---

## Project Objectives

- **Main Question**: How do net revenues by product line and warehouse vary during the months of June, July, and August?
- **Sub-questions**:
  - Identify seasonality and purchasing patterns.
  - Analyze the impact of payment methods on net revenues.
  - Determine the warehouse with the highest revenue and best performance.
  - Identify the most profitable product lines contributing to the margin.

---

## Deliverables

1. **Reports Generated with Python Automation Code**:

   - Scripts for data loading and cleaning.
   - Generation of automated reports in PDF and Jupyter Notebook.

2. **SQL Report**:

   - SQL queries to extract revenue by product line and warehouse.
   - Identification of sales patterns and seasonality.

3. **Power BI Dashboards**:

   - Key metrics (revenue by product line, warehouse, and payment method).
   - Visualization of trends and seasonality.

4. **Technical Documentation**:

   - Workflow description and justification of techniques.
   - ETL procedures and transformations in SQL and Python.

---

## Environment Setup

1. **PostgreSQL Database**:

   - Create a PostgreSQL database to store and query data.
   - Optimize the database with indexing on key columns (e.g., `order_number`).

2. **Environment Variables File**:

   - Set up a `.env` file to store credentials and file paths (`DATABASE_URL`, `CSV_PATH`, `WKHTMLTOPDF_PATH`).

3. **Python Virtual Environment**:
   - Create a virtual environment to manage project dependencies, ensuring necessary libraries are installed and isolated.

---

## ETL Pipeline

### 1. Data Extraction

- **Source**: CSV file provided by DataCamp, simulating retail sales.
- **Process**: `Pandas` is used to read the CSV, leveraging environment variables for flexible data loading.

### 2. Data Transformation

- **Cleaning**:
  - Remove rows with null or invalid values.
  - Convert the date column to `datetime` type and adjust other data types (e.g., `numeric` for monetary values).

- **Preparation for Load**:
  - Index critical columns to optimize queries.
  - Convert data columns to appropriate types using `ALTER TABLE` in SQL for the final structure.

### 3. Load

- **Load Data into PostgreSQL**:
  - Use `SQLAlchemy` and `Pandas` to insert data into the `sales` table in PostgreSQL.
  - Data can be replaced (`replace`) or appended (`append`) based on the update requirements.

---

## SQL Queries

### 1. Net Revenue by Product Line, Month, and Warehouse

Query to identify net revenue by each product line in each warehouse during the analyzed period, helping to determine the best-performing lines and warehouses.

### 2. Seasonality and Purchasing Patterns Analysis

This query identifies monthly and seasonal sales patterns, facilitating the identification of demand trends.

### 3. Payment Method Impact on Revenue and Costs

Query to analyze how each payment method affects the revenue margin, helping optimize payment methods to maximize revenue.

### 4. Margin and Efficiency Analysis by Warehouse and Product Line

Evaluates the performance of each warehouse in terms of net revenue and profitability, allowing prioritization of better-performing warehouses.

---

## Results Visualization in Power BI

1. **Creation of Calculated Measures**:

   - Measures for net revenue, totals, commissions, margin, forecasting, and profitability by unit.

2. **Interactive Dashboards**:

   - **Main Dashboard**: Interactive dashboard with the most relevant charts and insights.
   - **Net Revenue by Product Line and Warehouse**: Visualization of revenue by product and warehouse, broken down by month.
   - **Seasonality Analysis**: Line graph to observe seasonality in sales.
   - **Payment Method Impact**: Pie chart to identify the contribution of each payment method to total revenue.
   - **Warehouse Performance**: KPI cards to compare warehouses and their revenue margin.
   - **Product Comparison**: Combined column and line graph to view the top-selling products.

3. **Predictive Analysis and Trend Forecasting**:
   - `Forecasting` to anticipate sales trends, aiding in inventory and future promotions decision-making.

---

## Tools Used

This project uses various tools and technologies to cover the entire data analysis cycle, from ingestion to visualization:

- **Python**: Used for data processing and cleaning, as well as automation of loads and reports.
  - **Pandas** and **NumPy**: Data manipulation and cleaning.
  - **SQLAlchemy**: Database connection and management for PostgreSQL from Python.
  - **dotenv**: Environment variable management for secure and flexible configuration.
- **PostgreSQL**: Relational database for storing and processing large volumes of sales and transaction data.

- **Power BI**: Visualization tool for creating interactive dashboards with KPIs and trend analysis. Used:
  - **Calculated Measures**: For KPIs and comparative analysis.
  - **Interactive Visualizations**: Such as bar, line, and pie charts for in-depth revenue and seasonality analysis.

- **Jupyter Notebook**: For additional documentation, exploratory analysis, and generating automated reports in PDF format.

- **VS Code**: Code editor for project development, script configuration, and README.md file editing.

---

## Requirements

To run this project locally, ensure the following elements are installed and configured:

1. **Python 3.8 or higher**: Required for ETL scripts and automation.

   - Install project dependencies:
     ```bash
     pip install -r requirements.txt
     ```

2. **PostgreSQL**: Database used for data storage and queries.

   - Create a local PostgreSQL database and configure access credentials in the `.env` file.

3. **Power BI Desktop**: Required for creating and visualizing dashboards.

   - Visualizations and reports are optimized for Power BI Desktop, which allows customization and interactive data analysis.

4. **`.env` File**: Environment variable configuration for database credentials and file paths.

   - Example configuration in the `.env` file:
     ```makefile
     DATABASE_URL=postgres://user:password@localhost:5432/database_name
     CSV_PATH=path/to/file.csv
     WKHTMLTOPDF_PATH=path/to/wkhtmltopdf_executable
     ```

5. **wkhtmltopdf** (optional): To generate automated PDF reports from Jupyter Notebook.

---

## Conclusions and Next Steps

This analysis provides clear insights into the performance of each product line and warehouse, as well as the impact of payment methods on revenue. Next steps include:

- Evaluate inventory and promotion strategies based on seasonal patterns.
- Optimize payment methods and prioritize those with lower fees.
- Expand the analysis to other periods to validate growth and profitability trends.

---

> **Note**: For additional details on insights and charts, please refer to the [results notebook](/reports/sales_report.ipynb).
